var myChart;function removeData(a){a.data.labels.pop(),a.data.datasets.forEach(a=>{a.data.pop()}),a.update()}function renderConfig(a,e,t){document.getElementById("lcpsChartId");return{type:"line",data:{labels:a,datasets:[{label:"IC Covid",data:e,borderWidth:.5,borderColor:"red",backgroundColor:"rgba(255,204,204,1.0)",fill:!0,tension:.1},{label:"Clinic Covid",data:t,borderColor:"green",backgroundColor:"rgba(204,229,255,1.0)",fill:!0,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,font:{family:"verdana",size:18},text:"LCPS Covid Hospital Data"}}}}}function drawChart(a){$.ajax({url:"/api/v2/lcps/betweenDates",type:"GET",dataType:"json",data:{startDate:$("#startDatePicker").val(),endDate:$("#endDatePicker").val()},contentType:"application/json"}).fail(function(a,e){$("#errorMessage").show(),console.log("Ajax error call"+e)}).done(function(e){$("#errorMessage").hide();var t=[],r=[],d=[],n=e;for(var o in n)t.push(n[o].icBedsNl),r.push(n[o].kliniekBedsNl),d.push(n[o].datum);if(a)myChart.data.datasets[0].data=t,myChart.data.datasets[1].data=r,myChart.data.labels=d,console.log(myChart.config.data),myChart.update();else{var i=document.getElementById("lcpsChartId"),s=renderConfig(d,t,r);myChart=new Chart(i,s)}})}$(document).ready(function(){$("#errorMessage").hide(),$("#startDatePicker").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0}),$("#endDatePicker").datepicker({dateFormat:"yy-mm-dd",defaultDate:"today"}),$("#startDatePicker").datepicker("setDate",-365),$("#endDatePicker").datepicker("setDate","today"),drawChart(),$("#startDatePicker").on("change",function(){drawChart(!0)}),$("#endDatePicker").on("change",function(){drawChart(!0)})});